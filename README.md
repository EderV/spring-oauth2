# Spring Oauth2 Resource Server

A Spring Boot application that serves as an OAuth2 resource server, capable of authenticating and authorizing users using JWT tokens. It supports tokens generated by both external providers (e.g., Google, Facebook) and tokens issued internally by the application.

## Features

- **JWT Generation & Validation**:
    - Generate JWT tokens within the application.
    - Validate JWT tokens issued externally (e.g., by Google or Facebook).

- **OAuth2 Resource Server**:
    - Integrates Spring Security's OAuth2 resource server to secure endpoints.
    - Configured to validate tokens via a custom `JwtDecoder` and `JwtAuthenticationConverter`.

- **Profiles**
  - Different profiles to build the app for different environments
    - dev
    - prod
    - test

- **Dockerfile**
  - To package the app and deploy in production

- **Hexagonal Architecture & Clean Code**:
    - Uses a hexagonal (ports and adapters) architecture to ensure a clear separation of concerns.
    - Emphasizes clean code principles for maintainability and scalability.

- **Integration Tests with Testcontainers**:
    - All endpoints are covered by integration tests using Testcontainers for environment consistency.


## Technologies

- **Spring Boot 3.4.3**
- **Spring Security & OAuth2 Resource Server**
- **Testcontainers** for integration testing
- **Flyway** for database migrations
- **MySQL** as the primary database
- **Lombok** and **MapStruct** for code generation and mapping

## Endpoints
- **Authentication endpoints**
  - `/api/v1/auth/**`: Public endpoints for user authentication and token generation.
- **Protected endpoints**
  - `/api/v1/home/admin`: Accessible only to users with the ADMIN role.
  - `/api/v1/home`: Accessible only to users with the USER role.